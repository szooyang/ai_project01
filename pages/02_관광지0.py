import streamlit as st
import folium
from streamlit_folium import st_folium
import math

st.set_page_config(page_title="ì„œìš¸ ê´€ê´‘ì§€ ì§€ë„", layout="wide")

st.title("ğŸ—ºï¸ ì™¸êµ­ì¸ë“¤ì´ ì¢‹ì•„í•˜ëŠ” ì„œìš¸ì˜ ì£¼ìš” ê´€ê´‘ì§€ Top 10")

# ì„œìš¸ ê´€ê´‘ì§€ ë°ì´í„°
spots = [
    {"name": "ê²½ë³µê¶", "lat": 37.579617, "lon": 126.977041, "station": "3í˜¸ì„  ê²½ë³µê¶ì—­", 
     "desc": "ì¡°ì„ ì˜ ì •ê¶ìœ¼ë¡œ, ì•„ë¦„ë‹¤ìš´ ê¶ê¶ê³¼ ìˆ˜ë¬¸ì¥ êµëŒ€ì‹ìœ¼ë¡œ ìœ ëª…í•´ìš”."},
    {"name": "ëª…ë™", "lat": 37.563757, "lon": 126.982669, "station": "4í˜¸ì„  ëª…ë™ì—­", 
     "desc": "ì‡¼í•‘ê³¼ ë§›ì§‘ì˜ ì²œêµ­! ì™¸êµ­ì¸ ê´€ê´‘ê°ì´ ê°€ì¥ ë§ì´ ì°¾ëŠ” ê±°ë¦¬ì˜ˆìš”."},
    {"name": "ë‚¨ì‚°íƒ€ì›Œ(Nì„œìš¸íƒ€ì›Œ)", "lat": 37.551169, "lon": 126.988227, "station": "4í˜¸ì„  ëª…ë™ì—­", 
     "desc": "ì„œìš¸ì˜ ëœë“œë§ˆí¬ë¡œ, ì „ë§ëŒ€ì—ì„œ ì„œìš¸ ì „ê²½ì„ í•œëˆˆì— ë³¼ ìˆ˜ ìˆì–´ìš”."},
    {"name": "í™ëŒ€ê±°ë¦¬", "lat": 37.556327, "lon": 126.922051, "station": "2í˜¸ì„  í™ëŒ€ì…êµ¬ì—­", 
     "desc": "ì ŠìŒê³¼ ì˜ˆìˆ ì˜ ê±°ë¦¬ë¡œ, í´ëŸ½Â·ë²„ìŠ¤í‚¹Â·ì¹´í˜ë¡œ í™œê¸°ì°¬ ë¶„ìœ„ê¸°ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆì–´ìš”."},
    {"name": "ì´íƒœì›", "lat": 37.534539, "lon": 126.994941, "station": "6í˜¸ì„  ì´íƒœì›ì—­", 
     "desc": "ë‹¤ì–‘í•œ ë‚˜ë¼ì˜ ìŒì‹ê³¼ ë¬¸í™”ê°€ ì–´ìš°ëŸ¬ì§„ ê¸€ë¡œë²Œ ê±°ë¦¬ì˜ˆìš”."},
    {"name": "ë¶ì´Œí•œì˜¥ë§ˆì„", "lat": 37.582604, "lon": 126.983998, "station": "3í˜¸ì„  ì•ˆêµ­ì—­", 
     "desc": "ì „í†µ í•œì˜¥ì´ ëª¨ì—¬ ìˆëŠ” ë§ˆì„ë¡œ, í•œêµ­ì˜ ì˜› ì •ì·¨ë¥¼ ëŠë‚„ ìˆ˜ ìˆì–´ìš”."},
    {"name": "ë™ëŒ€ë¬¸ë””ìì¸í”Œë¼ì(DDP)", "lat": 37.566478, "lon": 127.009153, "station": "2Â·4Â·5í˜¸ì„  ë™ëŒ€ë¬¸ì—­ì‚¬ë¬¸í™”ê³µì›ì—­", 
     "desc": "ë¯¸ë˜í˜• ê±´ì¶•ë¬¼ê³¼ íŒ¨ì…˜Â·ë””ìì¸ ì „ì‹œë¡œ ìœ ëª…í•œ ë³µí•© ë¬¸í™” ê³µê°„ì´ì—ìš”."},
    {"name": "ì ì‹¤ ë¡¯ë°ì›”ë“œ", "lat": 37.511028, "lon": 127.098152, "station": "2Â·8í˜¸ì„  ì ì‹¤ì—­", 
     "desc": "ì‹¤ë‚´ì™¸ ë†€ì´ê³µì›ê³¼ ì‡¼í•‘ëª°, ì•„ì¿ ì•„ë¦¬ì›€ê¹Œì§€ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ì¢…í•© ì—”í„°í…Œì¸ë¨¼íŠ¸ ê³µê°„ì´ì—ìš”."},
    {"name": "ì½”ì—‘ìŠ¤ëª°", "lat": 37.512527, "lon": 127.058777, "station": "2í˜¸ì„  ì‚¼ì„±ì—­", 
     "desc": "ì•„ì‹œì•„ ìµœëŒ€ ê·œëª¨ì˜ ì§€í•˜ ì‡¼í•‘ëª°ë¡œ, ë³„ë§ˆë‹¹ ë„ì„œê´€ì´ ìœ ëª…í•´ìš”."},
    {"name": "ì²­ê³„ì²œ", "lat": 37.570052, "lon": 126.982247, "station": "5í˜¸ì„  ê´‘í™”ë¬¸ì—­", 
     "desc": "ë„ì‹¬ ì† íœ´ì‹ ê³µê°„ìœ¼ë¡œ, ì‚°ì±…í•˜ê¸° ì¢‹ì€ ë„ì‹¬ í•˜ì²œì´ì—ìš”."}
]

# ì§€ë„ ìƒì„±
m = folium.Map(location=[37.5665, 126.9780], zoom_start=12)

# ê´€ê´‘ì§€ ë§ˆì»¤ ì¶”ê°€
for spot in spots:
    folium.Marker(
        location=[spot["lat"], spot["lon"]],
        popup=None,  # í´ë¦­ ì‹œ ì„¤ëª… ì•ˆ ë³´ì´ê²Œ
        tooltip=f"{spot['name']} ({spot['station']})",  # ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ í‘œì‹œ
        icon=folium.Icon(color="yellow", icon="info-sign")
    ).add_to(m)

# ì§€ë„ í‘œì‹œ (70%)
st_folium(m, width=800, height=450)

# ê´€ê´‘ì§€ ì†Œê°œ
st.subheader("ğŸ“ ê´€ê´‘ì§€ ì†Œê°œ")
for i, spot in enumerate(spots, 1):
    st.markdown(f"**{i}. {spot['name']}** ({spot['station']})  \nğŸ‘‰ {spot['desc']}")

# ì¼ì • ì„ íƒ
st.subheader("ğŸ—“ï¸ ë‚˜ë§Œì˜ ì„œìš¸ ì—¬í–‰ ì¼ì • ë§Œë“¤ê¸°")
days = st.slider("ì—¬í–‰í•  ì¼ìˆ˜ë¥¼ ì„ íƒí•˜ì„¸ìš” (1~3ì¼)", 1, 3, 2)

# ì¼ì • ìƒì„±
st.markdown("---")
st.markdown(f"### âœ¨ {days}ì¼ ë™ì•ˆì˜ ì„œìš¸ ì—¬í–‰ ì¼ì • ì¶”ì²œ")

spots_per_day = math.ceil(len(spots) / days)
time_slots = ["09:00", "10:30", "12:00", "13:00", "14:30", "16:00", "17:30"]

for d in range(days):
    st.markdown(f"#### ğŸ“… Day {d+1}")
    start = d * spots_per_day
    end = start + spots_per_day
    selected_spots = spots[start:end]
    
    time_index = 0
    for i, spot in enumerate(selected_spots):
        # ì ì‹¬ì‹œê°„ ë„£ê¸°
        if time_slots[time_index] == "12:00":
            st.markdown("ğŸ½ï¸ **12:00 ~ 13:00 ì ì‹¬ì‹ì‚¬ ì‹œê°„** â€” ì„œìš¸ì˜ ë§›ì§‘ì—ì„œ ì—¬ìœ ë¡­ê²Œ ì‹ì‚¬í•˜ì„¸ìš”!")
            time_index += 1
        st.markdown(f"ğŸ•˜ **{time_slots[time_index]} ~ {time_slots[time_index+1]}** â€” "
                    f"**{spot['name']}** ({spot['station']})  \nğŸ‘‰ {spot['desc']}")
        time_index += 1
        if time_index >= len(time_slots) - 1:
            time_index = 0  # í•˜ë£¨ ì¼ì • ì‹œê°„ ìŠ¬ë¡¯ ì´ˆê¸°í™”
